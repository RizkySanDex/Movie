<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MOVIE STREAM - Big Buck Bunny</title>
<link href="https://vjs.zencdn.net/7.22.1/video-js.css" rel="stylesheet">
<style>
body{margin:0;font-family:Roboto,sans-serif;background:#F9F9F9;color:#0F0F0F;}
.video-container{max-width:900px;margin:20px auto;}
</style>
</head>
<body>

<div class="video-container">
  <video
    id="my-video"
    class="video-js vjs-default-skin"
    controls
    preload="auto"
    muted
    width="100%"
    height="500"
    data-setup='{}'>
    <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4" />
  </video>
</div>

<script src="https://vjs.zencdn.net/7.22.1/video.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/videojs-ima@1.10.0/dist/videojs.ima.min.js"></script>

<script>
var player = videojs('my-video');

// IMA setup
player.ima({
  id: 'my-video',
  adTagUrl: 'https://s.magsrv.com/v1/vast.php?idzone=5720072',
  debug: true
});

player.ready(function() {
  player.ima.requestAds();
  player.play();

  // Mid-roll setelah 1 menit (60 detik)
  player.on('timeupdate', function() {
    if(player.currentTime() >= 60 && !player.midrollPlayed){
      player.midrollPlayed = true;
      // Request ads lagi untuk mid-roll
      player.ima.requestAds();
    }
  });
});
</script>

</body>
</html>
